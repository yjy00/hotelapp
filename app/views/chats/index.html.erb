<%= render "shared/header" %>

<div class="container">
  <div class="chat-container-inner">

        <h4 class="chat-form-title">チャット</h4>


        <% if @chats %>
          <div id="chats">
            <% @chats.each do |chat| %>
            
              <div class="from-name">
                <p class="from-index"><%=  chat.from.name %></p> 
                <p class="name-index"><%=  chat.by %></p> 
              </div>

            <div class="message-index-wrapper">
              <%= simple_format(chat.message) %>
            </div>

        <% end %>
      </div>
    <% end %>

        <%= form_with model: @chat, class:"chat-form", local: false do |f| %>

          <%= render 'shared/error_messages', model: f.object %>

        <div class="from-name">
          <div class="form-group">
            <label>どちらから</label>
            <%= f.collection_select(:from_id, From.all, :id, :name, {}, {class:"form-control"}) %>
          </div>

          <div class='form-group'>
            <label>名前</label>
            <%= f.text_area :by, class:"form-control", placeholder:"名前", maxlength:"40" %>
          </div>
        </div>

          <div class='form-group'>
            <label>メッセージ</label>
            <%= f.text_area :message, class: "form-control", placeholder:"メッセージ" %>
          </div>

            <%= f.submit "送信", class:"btn" %>

        <% end %>

</div>
      </div>
    
  <%= render "shared/footer" %>
